### get_services_from_repo

```json
{
  "model": "gpt-4",
  "messages": [
    {
      "role": "system",
      "content": "\nYou will be provided a GitHub organization name, a repository name, and the directory hierarchy for that repository (starting from the root of the repository). Your task is to create a short, human-readable name and a description for any public HTTP services hosted in this repository. It's likely that there is exactly one service in the repository, however there may be more than one in the case of a monorepo hosting multiple applications, and there may be none in the case of a repository hosting only shared library code, developer tools, configuration, etc.\n\nThe directory hierarchy will be delimited by three exclamation points, and formatted this way:\n\n- <directory name>\n    - <directory name>\n        - <file name>\n        - <file name>\n    - <directory name>\n        - <file name>\n    - ...\n\nThe service name(s) will be used in a high-level system architecture diagram. Go through the hierarchy a few times before you make your decision, each time refining your understanding of the repository.\n\nOutput your answer as a JSON array of objects, with each object containing the following keys:\n\n- \"service_name\": the name that you created for the service\n- \"service_description\": the description that you wrote for the service\n- \"service_root\": The path to the directory in the provided hierarchy that can be considered the root directory of the service.\n\nYour full response should be JSON-parseable, so don't respond with something that can't be parsed by a JSON parser.\n"
    },
    {
      "role": "user",
      "content": "\n        GitHub organization: eave-fyi\n\n        Repository: eave-monorepo\n\n        Directory Hierarchy:\n        !!!\n        - apps\n- apps/core\n    - apps/core/eave\n        - apps/core/eave/core\n            - apps/core/eave/core/public\n                - apps/core/eave/core/public/requests\n                    - apps/core/eave/core/public/requests/oauth\n                        - apps/core/eave/core/public/requests/oauth/base.py\n                        - apps/core/eave/core/public/requests/oauth/slack_oauth.py\n                        - apps/core/eave/core/public/requests/oauth/github_oauth.py\n                        - apps/core/eave/core/public/requests/oauth/shared.py\n                        - apps/core/eave/core/public/requests/oauth/__init__.py\n                        - apps/core/eave/core/public/requests/oauth/atlassian_oauth.py\n                        - apps/core/eave/core/public/requests/oauth/google_oauth.py\n                    - apps/core/eave/core/public/requests/atlassian_integration.py\n                    - apps/core/eave/core/public/requests/team.py\n                    - apps/core/eave/core/public/requests/authed_account.py\n                    - apps/core/eave/core/public/requests/github_integration.py\n                    - apps/core/eave/core/public/requests/subscriptions.py\n                    - apps/core/eave/core/public/requests/status.py\n                    - apps/core/eave/core/public/requests/slack_integration.py\n                    - apps/core/eave/core/public/requests/__init__.py\n                    - apps/core/eave/core/public/requests/documents.py\n                    - apps/core/eave/core/public/requests/connect_integration.py\n                    - apps/core/eave/core/public/requests/noop.py\n                - apps/core/eave/core/public/middlewares\n                    - apps/core/eave/core/public/middlewares/authentication.py\n                    - apps/core/eave/core/public/middlewares/team_lookup.py\n                    - apps/core/eave/core/public/middlewares/__init__.py\n                    - apps/core/eave/core/public/middlewares/development_bypass.py\n                - apps/core/eave/core/public/http_endpoint.py\n                - apps/core/eave/core/public/exception_handlers.py\n                - apps/core/eave/core/public/__init__.py\n            - apps/core/eave/core/internal\n                - apps/core/eave/core/internal/oauth\n                    - apps/core/eave/core/internal/oauth/slack.py\n                    - apps/core/eave/core/internal/oauth/google.py\n                    - apps/core/eave/core/internal/oauth/__init__.py\n                    - apps/core/eave/core/internal/oauth/state_cookies.py\n                    - apps/core/eave/core/internal/oauth/atlassian.py\n                    - apps/core/eave/core/internal/oauth/models.py\n                - apps/core/eave/core/internal/orm\n                    - apps/core/eave/core/internal/orm/slack_installation.py\n                    - apps/core/eave/core/internal/orm/connect_installation.py\n                    - apps/core/eave/core/internal/orm/base.py\n                    - apps/core/eave/core/internal/orm/github_installation.py\n                    - apps/core/eave/core/internal/orm/team.py\n                    - apps/core/eave/core/internal/orm/account.py\n                    - apps/core/eave/core/internal/orm/subscription.py\n                    - apps/core/eave/core/internal/orm/__init__.py\n                    - apps/core/eave/core/internal/orm/util.py\n                    - apps/core/eave/core/internal/orm/atlassian_installation.py\n                    - apps/core/eave/core/internal/orm/document_reference.py\n                    - apps/core/eave/core/internal/orm/resource_mutex.py\n                    - apps/core/eave/core/internal/orm/confluence_destination.py\n                - apps/core/eave/core/internal/destinations\n                - apps/core/eave/core/internal/document_client.py\n                - apps/core/eave/core/internal/__init__.py\n                - apps/core/eave/core/internal/database.py\n                - apps/core/eave/core/internal/config.py\n            - apps/core/eave/core/__init__.py\n            - apps/core/eave/core/app.py\n    - apps/core/bin\n        - apps/core/bin/repl.py\n- apps/slack\n    - apps/slack/eave\n        - apps/slack/eave/slack\n            - apps/slack/eave/slack/requests\n                - apps/slack/eave/slack/requests/warmup.py\n                - apps/slack/eave/slack/requests/event_processor.py\n                - apps/slack/eave/slack/requests/__init__.py\n                - apps/slack/eave/slack/requests/event_callback.py\n            - apps/slack/eave/slack/brain\n                - apps/slack/eave/slack/brain/base.py\n                - apps/slack/eave/slack/brain/intent_processing.py\n                - apps/slack/eave/slack/brain/communication.py\n                - apps/slack/eave/slack/brain/message_prompts.py\n                - apps/slack/eave/slack/brain/subscription_management.py\n                - apps/slack/eave/slack/brain/document_management.py\n                - apps/slack/eave/slack/brain/context_building.py\n                - apps/slack/eave/slack/brain/document_metadata.py\n                - apps/slack/eave/slack/brain/core.py\n            - apps/slack/eave/slack/slack_app.py\n            - apps/slack/eave/slack/__init__.py\n            - apps/slack/eave/slack/event_handlers.py\n            - apps/slack/eave/slack/slack_models.py\n            - apps/slack/eave/slack/app.py\n            - apps/slack/eave/slack/config.py\n    - apps/slack/bin\n    - apps/slack/socketmode.py\n- apps/jira\n    - apps/jira/src\n        - apps/jira/src/events\n            - apps/jira/src/events/routes.ts\n            - apps/jira/src/events/comment-created.ts\n        - apps/jira/src/api\n            - apps/jira/src/api/routes.ts\n        - apps/jira/src/types.ts\n        - apps/jira/src/jira-client.ts\n        - apps/jira/src/app.ts\n        - apps/jira/src/config.ts\n    - apps/jira/bin\n    - apps/jira/server.ts\n- apps/appengine-default\n    - apps/appengine-default/main.py\n- apps/github\n    - apps/github/src\n        - apps/github/src/events\n            - apps/github/src/events/routes.ts\n            - apps/github/src/events/push.ts\n        - apps/github/src/graphql\n        - apps/github/src/api\n            - apps/github/src/api/routes.ts\n            - apps/github/src/api/content.ts\n            - apps/github/src/api/subscribe.ts\n            - apps/github/src/api/repos.ts\n        - apps/github/src/lib\n            - apps/github/src/lib/graphql-util.ts\n            - apps/github/src/lib/octokit-util.ts\n            - apps/github/src/lib/cache.ts\n        - apps/github/src/types.ts\n        - apps/github/src/app.ts\n        - apps/github/src/dispatch.ts\n        - apps/github/src/registry.ts\n        - apps/github/src/config.ts\n    - apps/github/bin\n    - apps/github/server.ts\n- apps/confluence\n    - apps/confluence/src\n        - apps/confluence/src/events\n            - apps/confluence/src/events/routes.ts\n        - apps/confluence/src/api\n            - apps/confluence/src/api/routes.ts\n            - apps/confluence/src/api/util.ts\n            - apps/confluence/src/api/search-content.ts\n            - apps/confluence/src/api/create-content.ts\n            - apps/confluence/src/api/delete-content.ts\n            - apps/confluence/src/api/get-available-spaces.ts\n            - apps/confluence/src/api/update-content.ts\n        - apps/confluence/src/app.ts\n        - apps/confluence/src/confluence-client.ts\n        - apps/confluence/src/config.ts\n    - apps/confluence/bin\n    - apps/confluence/server.ts\n- apps/marketing\n    - apps/marketing/eave\n        - apps/marketing/eave/marketing\n            - apps/marketing/eave/marketing/static\n                - apps/marketing/eave/marketing/static/dist\n                - apps/marketing/eave/marketing/static/images\n            - apps/marketing/eave/marketing/templates\n            - apps/marketing/eave/marketing/js\n                - apps/marketing/eave/marketing/js/components\n                    - apps/marketing/eave/marketing/js/components/Footer\n                    - apps/marketing/eave/marketing/js/components/Copy\n                    - apps/marketing/eave/marketing/js/components/EaveLogo\n                    - apps/marketing/eave/marketing/js/components/Header\n                    - apps/marketing/eave/marketing/js/components/hoc\n                    - apps/marketing/eave/marketing/js/components/Block\n                    - apps/marketing/eave/marketing/js/components/AuthUser\n                    - apps/marketing/eave/marketing/js/components/PrivateRoutes\n                    - apps/marketing/eave/marketing/js/components/AuthModal\n                    - apps/marketing/eave/marketing/js/components/Button\n                    - apps/marketing/eave/marketing/js/components/Icons\n                    - apps/marketing/eave/marketing/js/components/Pages\n                        - apps/marketing/eave/marketing/js/components/Pages/Dashboard\n                        - apps/marketing/eave/marketing/js/components/Pages/PrivacyPage\n                        - apps/marketing/eave/marketing/js/components/Pages/Page\n                        - apps/marketing/eave/marketing/js/components/Pages/HomePage\n                        - apps/marketing/eave/marketing/js/components/Pages/TermsPage\n                    - apps/marketing/eave/marketing/js/components/Banners\n                        - apps/marketing/eave/marketing/js/components/Banners/PrivacyBanner\n                        - apps/marketing/eave/marketing/js/components/Banners/DocumentationBanner\n                        - apps/marketing/eave/marketing/js/components/Banners/IntegrationsBanner\n                        - apps/marketing/eave/marketing/js/components/Banners/SlackBanner\n                    - apps/marketing/eave/marketing/js/components/Hero\n                    - apps/marketing/eave/marketing/js/components/PageSection\n                    - apps/marketing/eave/marketing/js/components/Affiliates\n                    - apps/marketing/eave/marketing/js/components/BlockStack\n                    - apps/marketing/eave/marketing/js/components/ScrollToTop\n                - apps/marketing/eave/marketing/js/hooks\n                - apps/marketing/eave/marketing/js/context\n                - apps/marketing/eave/marketing/js/theme\n            - apps/marketing/eave/marketing/__init__.py\n            - apps/marketing/eave/marketing/app.py\n            - apps/marketing/eave/marketing/config.py\n    - apps/marketing/bin\n- apps/archer\n    - apps/archer/eave\n        - apps/archer/eave/archer\n            - apps/archer/eave/archer/main.py\n            - apps/archer/eave/archer/graph_builder.py\n            - apps/archer/eave/archer/service_info.py\n            - apps/archer/eave/archer/render.py\n            - apps/archer/eave/archer/service_graph.py\n            - apps/archer/eave/archer/service_dependencies.py\n            - apps/archer/eave/archer/__init__.py\n            - apps/archer/eave/archer/util.py\n            - apps/archer/eave/archer/service_registry.py\n            - apps/archer/eave/archer/prompt_exp.py\n            - apps/archer/eave/archer/config.py\n            - apps/archer/eave/archer/fs_hierarchy.py\n    - apps/archer/bin\n        !!!\n"
    }
  ],
  "temperature": 0,
  "stop": [
    "STOP_SEQUENCE"
  ]
}
```

### get_dependencies

```json
{
  "model": "gpt-4",
  "messages": [
    {
      "role": "system",
      "content": "\n            You will be given a GitHub organization name, a repository name, and some code from that repository. The code will be delimited by three exclamation marks. Your task is to find the APIs and services that the code depends on, which will then be used to create a high-level system architecture diagram.\n\n            To perform this task, follow these steps:\n\n            1. Find references to well-known, common third-party services in the code. For example, there may be references to Google Cloud, AWS, Redis, Postgres, Slack API, SendGrid.\n\n            2. Find references to internal services. For example: Analytics, Core API, Authentication, Users API, GraphQL, Logging, Storage, Database.\n\n            3. Once you've gone through the code and have a better understanding of its purpose and context, go through it a few more times and adjust your list if necessary based on what you've learned.\n\n            4. For each service, either use one of the provided known service names if it makes sense to do so, otherwise create a short, human-readable name for the service.\n\n            5. Write a 1-paragraph explanation of what the service does and how it fits into the system architecture.\n\n            The code might not have any references to other systems. If you don't think there are any, don't force it.\n\n\nOutput your answer as a JSON array of objects, with each object containing the following keys:\n\n- \"service_name\": the name that you created for the service\n- \"service_description\": the description that you wrote for the service\n\nYour full response should be JSON-parseable, so don't respond with something that can't be parsed by a JSON parser.\n\n"
    },
    {
      "role": "user",
      "content": "\n            GitHub organization: eave-fyi\n\n            Repository: eave-monorepo\n\n            Known service names: Eave Origins, Eave Signing, Authentication Middleware, Team Lookup Middleware, Atlassian Integration, Github Integration, Slack Integration, Google OAuth, Slack OAuth, Atlassian OAuth, Github OAuth, Database, Cache, Starlette, EaveRequestState, EaveLogger, Pydantic, Eave.stdlib.api_util, Eave.stdlib.cookies, Exception Handlers, HTTP Endpoint, Eave Database, Eave ORM, Eave API Util, Eave Exception Handlers, Eave Core Internal, Eave.stdlib.config, Eave Stdlib, Eave Analytics, AuthProvider, OAuth, Eave Slack Integration, Eave Error Code, Eave Core API, Eave OAuth, Eave.stdlib.exceptions, Eave.stdlib.request_state, Eave.stdlib.middleware.development_bypass, Eave.stdlib.headers, Eave.core.internal.database, Eave.core.internal.orm, Eave.stdlib.core_api.models.documents, Eave.stdlib.logging, DocumentClient, App Config, ORM, SQLAlchemy, Asyncpg, PostgreSQL, Eave Config, Eave Core Internal Config, Google Integration, Models, State Cookies, Logging, Resource Mutex, Python Standard Library, Eave.stdlib.util, Eave Document Client, Eave Integrations, Eave.core.internal.oauth, slack_sdk.errors, Eave.stdlib.core_api.models.subscriptions, Account Service, Atlassian Integration Service, Document Reference Service, Github Integration Service, Slack Integration Service, Connect Installation Service, Subscription Service, Team Service, Resource Mutex Service, AsyncIO, OAuthLib, Eave Core API Models, UUID, datetime, Confluence API, Google Cloud Tasks, Slack Bolt, Eave Slack Models, Eave Slack Brain, Slack SDK, Eave Util, Eave Slack App, Eave Origin, SharedConfig, Eave.stdlib.signing, Eave.stdlib.cache, Eave.stdlib.requests, Eave.stdlib.eave_origins, SlackEventProcessorTask, AsyncSlackRequestHandler, Slack App, Task Queue, Eave Slack, Eave Team, Eave Subscriptions, Message Prompts, Document Management, Subscription Management, OpenAI Client, Eave Logging, Eave Communication, Eave OpenAI Client, Slack Data, Link Handler, Eave OpenAI, SubscriptionInfo, IntentProcessingMixin, Brain, Atlassian Connect Express, Eave-stdlib-ts, Express, Jira REST API, Atlassian Connect Express (ACE), Eave API Adapter, Middleware, GAELifecycleRouter, WebhookRouter, InternalApiRouter, Jira Client, Lifecycle Router, Octokit, LogContext, Helmet Middleware, Registry, GitHubOperationsContext, HandlerFunction, registerHandler, getHandler, Github App Integration, Webhook Middleware, Dispatch Function, GraphQL Util, Content Service, GraphQL, Node.js File System, Octokit GraphQL, Global Cache, Eave Team Service, Eave App Config, EphemeralCache, HTML Entities, Confluence Client, Express Handler, Express.js, Flask, Werkzeug, JSON, OS, Eave Service Registry, Eave Service Graph, Eave File Contents, Eave Service Info, Eave Service Dependencies, Eave Render, Github Context, Service Graph, FSHierarchy, Eave.stdlib.openai_client, Eave.archer.util, Eave.archer.fs_hierarchy, Eave.archer.service_graph, Eave Archer Config, Service, OpenAIResponseService, OpenAI Model, Service Registry, OpenAI Chat Completion, Tiktoken, Eave Archer Graph Builder, Eave Archer Render, Eave Archer Service Info\n\n             Code:\n            !!!\n\nimport os\nimport re\n\nfrom eave.archer.config import DIR_EXCLUDES, FILE_INCLUDES\n\n\nclass FSHierarchy:\n    root: str\n    dirs: list[\"FSHierarchy\"]\n    files: list[str]\n\n    def __init__(self, root: str) -> None:\n        self.root = root\n        self.dirs = []\n        self.files = []\n\ndef build_hierarchy(root: str) -> FSHierarchy:\n    hierarchy = FSHierarchy(root=root)\n\n    for dirent in os.scandir(path=root):\n        path = os.path.join(root, dirent.name)\n        if dirent.is_dir(follow_symlinks=False) and not any([re.search(e, path) for e in DIR_EXCLUDES]):\n            child_hierarchy = build_hierarchy(root=path)\n            hierarchy.dirs.append(child_hierarchy)\n        elif dirent.is_file() and any([re.search(e, path) for e in FILE_INCLUDES]):\n            hierarchy.files.append(path)\n\n    return hierarchy\n            !!!\n"
    }
  ],
  "temperature": 0,
  "stop": [
    "STOP_SEQUENCE"
  ]
}
```

